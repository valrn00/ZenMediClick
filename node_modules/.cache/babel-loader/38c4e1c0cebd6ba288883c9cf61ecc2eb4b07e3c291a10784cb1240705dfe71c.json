{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { usuarioService } from '../services/usuarioService';\nexport const useAuth = () => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [token, setToken] = useState(null);\n  useEffect(() => {\n    const storedToken = localStorage.getItem('token');\n    if (storedToken) {\n      setToken(storedToken);\n      // Opcional: Verifica token con /api/users/me\n      // const res = await axios.get(`${API_URL}/users/me`, { headers: { Authorization: `Bearer ${storedToken}` } });\n      // if (res.data) setUser(res.data);\n    }\n  }, []);\n  const login = async credentials => {\n    const res = await usuarioService.loginUsuario(credentials);\n    if (res.data.user) {\n      setUser(res.data.user);\n      setToken(res.data.token);\n      localStorage.setItem('token', res.data.token); // Solo token, no user\n    }\n    return res;\n  };\n  const register = async data => {\n    const res = await usuarioService.registerUsuario(data);\n    if (res.data.success) {\n      const loginRes = await login({\n        email: data.email,\n        password: data.password\n      });\n      if (loginRes.data.user) {\n        setUser(loginRes.data.user);\n        setToken(loginRes.data.token);\n        localStorage.setItem('token', loginRes.data.token);\n      }\n    }\n    return res;\n  };\n  const logout = () => {\n    setUser(null);\n    setToken(null);\n    localStorage.removeItem('token');\n  };\n  return {\n    user,\n    token,\n    login,\n    register,\n    logout\n  };\n};\n_s(useAuth, \"cANLe8RtnwDE5y1hInrXoZDdgy8=\");","map":{"version":3,"names":["useState","useEffect","usuarioService","useAuth","_s","user","setUser","token","setToken","storedToken","localStorage","getItem","login","credentials","res","loginUsuario","data","setItem","register","registerUsuario","success","loginRes","email","password","logout","removeItem"],"sources":["C:/Users/Acer/Desktop/zzz/ZenMediClick_/src/hooks/useAuth.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { usuarioService } from '../services/usuarioService';\r\n\r\nexport const useAuth = () => {\r\n  const [user, setUser] = useState(null);\r\n  const [token, setToken] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const storedToken = localStorage.getItem('token');\r\n    if (storedToken) {\r\n      setToken(storedToken);\r\n      // Opcional: Verifica token con /api/users/me\r\n      // const res = await axios.get(`${API_URL}/users/me`, { headers: { Authorization: `Bearer ${storedToken}` } });\r\n      // if (res.data) setUser(res.data);\r\n    }\r\n  }, []);\r\n\r\n  const login = async (credentials) => {\r\n    const res = await usuarioService.loginUsuario(credentials);\r\n    if (res.data.user) {\r\n      setUser(res.data.user);\r\n      setToken(res.data.token);\r\n      localStorage.setItem('token', res.data.token); // Solo token, no user\r\n    }\r\n    return res;\r\n  };\r\n\r\n  const register = async (data) => {\r\n    const res = await usuarioService.registerUsuario(data);\r\n    if (res.data.success) {\r\n      const loginRes = await login({ email: data.email, password: data.password });\r\n      if (loginRes.data.user) {\r\n        setUser(loginRes.data.user);\r\n        setToken(loginRes.data.token);\r\n        localStorage.setItem('token', loginRes.data.token);\r\n      }\r\n    }\r\n    return res;\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    setToken(null);\r\n    localStorage.removeItem('token');\r\n  };\r\n\r\n  return { user, token, login, register, logout };\r\n};"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,cAAc,QAAQ,4BAA4B;AAE3D,OAAO,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC3B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EAExCC,SAAS,CAAC,MAAM;IACd,MAAMQ,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACjD,IAAIF,WAAW,EAAE;MACfD,QAAQ,CAACC,WAAW,CAAC;MACrB;MACA;MACA;IACF;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,KAAK,GAAG,MAAOC,WAAW,IAAK;IACnC,MAAMC,GAAG,GAAG,MAAMZ,cAAc,CAACa,YAAY,CAACF,WAAW,CAAC;IAC1D,IAAIC,GAAG,CAACE,IAAI,CAACX,IAAI,EAAE;MACjBC,OAAO,CAACQ,GAAG,CAACE,IAAI,CAACX,IAAI,CAAC;MACtBG,QAAQ,CAACM,GAAG,CAACE,IAAI,CAACT,KAAK,CAAC;MACxBG,YAAY,CAACO,OAAO,CAAC,OAAO,EAAEH,GAAG,CAACE,IAAI,CAACT,KAAK,CAAC,CAAC,CAAC;IACjD;IACA,OAAOO,GAAG;EACZ,CAAC;EAED,MAAMI,QAAQ,GAAG,MAAOF,IAAI,IAAK;IAC/B,MAAMF,GAAG,GAAG,MAAMZ,cAAc,CAACiB,eAAe,CAACH,IAAI,CAAC;IACtD,IAAIF,GAAG,CAACE,IAAI,CAACI,OAAO,EAAE;MACpB,MAAMC,QAAQ,GAAG,MAAMT,KAAK,CAAC;QAAEU,KAAK,EAAEN,IAAI,CAACM,KAAK;QAAEC,QAAQ,EAAEP,IAAI,CAACO;MAAS,CAAC,CAAC;MAC5E,IAAIF,QAAQ,CAACL,IAAI,CAACX,IAAI,EAAE;QACtBC,OAAO,CAACe,QAAQ,CAACL,IAAI,CAACX,IAAI,CAAC;QAC3BG,QAAQ,CAACa,QAAQ,CAACL,IAAI,CAACT,KAAK,CAAC;QAC7BG,YAAY,CAACO,OAAO,CAAC,OAAO,EAAEI,QAAQ,CAACL,IAAI,CAACT,KAAK,CAAC;MACpD;IACF;IACA,OAAOO,GAAG;EACZ,CAAC;EAED,MAAMU,MAAM,GAAGA,CAAA,KAAM;IACnBlB,OAAO,CAAC,IAAI,CAAC;IACbE,QAAQ,CAAC,IAAI,CAAC;IACdE,YAAY,CAACe,UAAU,CAAC,OAAO,CAAC;EAClC,CAAC;EAED,OAAO;IAAEpB,IAAI;IAAEE,KAAK;IAAEK,KAAK;IAAEM,QAAQ;IAAEM;EAAO,CAAC;AACjD,CAAC;AAACpB,EAAA,CA5CWD,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}